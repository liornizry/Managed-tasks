# מערכת ניהול משימות היררכית

מערכת ניהול משימות מתקדמת עם ממשק מותאם לנייד, המאפשרת למנהלים ותתי-מנהלים לעקוב ולנהל משימות בצורה יעילה.

## 🎯 מטרת הפרויקט

מערכת זו נועדה לסייע לצוותים קטנים עם מבנה היררכי (מנהל + 3 תתי-מנהלים) לנהל ולעקוב אחר משימות בצורה פשוטה וקלה במיוחד דרך הנייד.

## ✨ תכונות עיקריות

### עבור המנהל:
- ✅ יצירת משימות חדשות והקצאתן לתתי-מנהלים **או לעצמו**
- ✅ צפייה בסטטוס של כל המשימות במערכת
- ✅ מעקב אחר ביצועי תתי-המנהלים
- ✅ **סינון משימות לפי תת-מנהל ספציפי**
- ✅ סינון משימות לפי סטטוס (ממתינות, בתהליך, הושלמו)
- ✅ מחיקת משימות

### עבור תתי-המנהלים:
- ✅ **יצירת משימות חדשות לעצמם**
- ✅ צפייה במשימות שהוקצו להם
- ✅ עדכון סטטוס משימות (ממתין, בתהליך, הושלם, חסום)
- ✅ הוספת עדכונים והערות למשימות
- ✅ מעקב אחר ביצועים אישיים

### תכונות כלליות:
- 📱 ממשק מותאם במיוחד לנייד עם כפתורים גדולים
- 🎨 עיצוב מודרני עם צבעים רכים ונעימים לעין
- 🔒 מערכת אימות והתחברות
- 📊 לוח בקרה עם סטטיסטיקות
- 🔔 מערכת עדכונים והיסטוריה למשימות
- 🎨 תגיות צבעוניות לעדיפות וסטטוס
- ⚪ **משימות שהושלמו מוצגות באפור ולא ניתן להתחיל אותן מחדש**

## 🌐 כתובות URL

### URL ציבורי להתחברות:
**https://3000-i1nwz4fphtwq0bkynmzrn-5634da27.sandbox.novita.ai**

### נקודות קצה API:
- `POST /api/login` - התחברות למערכת
- `GET /api/tasks` - קבלת רשימת משימות (עם פילטרים)
- `GET /api/tasks/:id` - פרטי משימה ספציפית
- `POST /api/tasks` - יצירת משימה חדשה (מנהל בלבד)
- `PATCH /api/tasks/:id/status` - עדכון סטטוס משימה
- `POST /api/tasks/:id/updates` - הוספת עדכון למשימה
- `DELETE /api/tasks/:id` - מחיקת משימה (מנהל בלבד)
- `GET /api/users/sub-managers` - קבלת רשימת תתי-מנהלים
- `GET /api/stats/:userId` - קבלת סטטיסטיקות

## 👥 משתמשי דמו

### מנהל:
- שם משתמש: `manager`
- סיסמה: `123456`
- שם: דוד מנהל

### תתי-מנהלים:
1. שם משתמש: `sub1` / סיסמה: `123456` (יוסי כהן)
2. שם משתמש: `sub2` / סיסמה: `123456` (רחל לוי)
3. שם משתמש: `sub3` / סיסמה: `123456` (משה אברהם)

## 🗄️ ארכיטקטורת מידע

### מודלים:
1. **Users (משתמשים)**
   - id, username, password, name, role, manager_id
   - תפקידים: `manager` (מנהל), `sub_manager` (תת-מנהל)

2. **Tasks (משימות)**
   - id, title, description, status, priority, assigned_to, created_by, due_date
   - סטטוסים: `pending`, `in_progress`, `completed`, `blocked`
   - עדיפויות: `low`, `medium`, `high`, `urgent`

3. **Task Updates (עדכונים)**
   - id, task_id, user_id, update_text, old_status, new_status

### שירותי אחסון:
- **Cloudflare D1 (SQLite)** - מסד נתונים מבוזר גלובלי
- מצב מקומי לפיתוח עם `.wrangler/state/v3/d1`

## 📖 מדריך שימוש

### עבור המנהל:

1. **התחברות**: היכנס עם `manager / 123456`
2. **צפייה בסטטיסטיקות**: בחלק העליון תראה סיכום של כל המשימות
3. **יצירת משימה חדשה**:
   - לחץ על "הוסף משימה חדשה"
   - מלא כותרת, תיאור (אופציונלי)
   - בחר תת-מנהל להקצאת המשימה **או בחר "לעצמי"**
   - קבע עדיפות ותאריך יעד
   - לחץ "צור משימה"
4. **סינון משימות**:
   - **סינון לפי סטטוס**: הכל, ממתינות, בתהליך, הושלמו
   - **סינון לפי תת-מנהל**: כל המשימות, המשימות שלי, או לפי תת-מנהל ספציפי
5. **מחיקת משימה**: לחץ על סמל הפח בכרטיס המשימה
6. **צפייה במשימות שהושלמו**: משימות שהושלמו מוצגות באפור

### עבור תת-מנהל:

1. **התחברות**: היכנס עם אחד מתתי-המנהלים (למשל `sub1 / 123456`)
2. **יצירת משימה לעצמי**: לחץ על "הוסף משימה לעצמי" - המשימה תוקצה אוטומטית לך
3. **צפייה במשימות שלך**: תראה רק משימות שהוקצו לך
4. **עדכון סטטוס**:
   - שימוש מהיר: לחץ "התחל" או "סיים" בכרטיס המשימה (למשימות שלא הושלמו)
   - משימות שהושלמו: יוצגו באפור עם כפתור "צפייה" בלבד
   - עדכון מפורט: לחץ "עדכן" לצפייה מלאה
4. **הוספת עדכון**:
   - לחץ "עדכן" במשימה
   - כתוב עדכון או הערה
   - לחץ "שלח עדכון"
5. **צפייה בהיסטוריה**: ראה את כל העדכונים והשינויים במשימה

## 🚀 סטטוס פריסה

- **פלטפורמה**: Cloudflare Pages (מוכן לפריסה)
- **סטטוס נוכחי**: ✅ פעיל בסביבת Sandbox
- **טכנולוגיות**:
  - Backend: Hono + TypeScript
  - Frontend: Vanilla JavaScript + Tailwind CSS
  - Database: Cloudflare D1 (SQLite)
- **עדכון אחרון**: 4 בנובמבר 2025

## 🎨 שינויים אחרונים (4 בנובמבר)

1. ✅ **צבעים רכים יותר** - כל הצבעים באתר עודכנו לגוונים פחות צועקים ונעימים יותר לעין
2. ✅ **משימות שהושלמו באפור** - משימות מושלמות מוצגות עם רקע אפור ושקיפות, עם קו חוצה על הכותרת
3. ✅ **ביטול כפתור "התחל" למשימות שהושלמו** - משימות מושלמות מציגות רק כפתור "צפייה"
4. ✅ **תתי-מנהלים יכולים ליצור משימות** - כפתור "הוסף משימה לעצמי" זמין לתתי-מנהלים
5. ✅ **מנהל יכול לסנן לפי תת-מנהל** - סינון נוסף מאפשר למנהל לראות משימות של תת-מנהל ספציפי
6. ✅ **מנהל יכול להקצות משימה לעצמו** - באפשרות ההקצאה יש כעת "לעצמי" למנהל

## 🛠️ התקנה והרצה מקומית

### דרישות מוקדמות:
- Node.js 20+
- npm

### צעדים:

```bash
# התקנת תלויות
cd /home/user/webapp
npm install

# יצירת database מקומי
npm run db:migrate:local
npm run db:seed

# בנייה
npm run build

# הרצה בסביבת פיתוח
npm run dev:sandbox

# או עם PM2
pm2 start ecosystem.config.cjs
```

## 📱 אופטימיזציה לנייד

המערכת תוכננה במיוחד לשימוש בנייד:
- כפתורים גדולים (מינימום 48x48px) לנוחות מגע
- ממשק RTL (מימין לשמאל) לעברית
- גופנים גדולים וקריאים
- צבעים רכים ונעימים לעין - פחות צועקים
- משימות שהושלמו באפור עם שקיפות
- אנימציות חלקות
- מתאים לכל גדלי מסך

## 🔮 תכונות עתידיות מומלצות

1. ✨ התראות בזמן אמת (Push Notifications)
2. 📅 תצוגת לוח שנה למשימות
3. 📊 דוחות ביצועים מפורטים
4. 🔍 חיפוש מתקדם במשימות
5. 📎 צירוף קבצים למשימות
6. 👥 הוספת עובדים תחת תתי-מנהלים
7. 🎯 משימות משנה (Sub-tasks)
8. ⏰ תזכורות אוטומטיות
9. 📈 גרפים ותרשימים ויזואליים
10. 🌐 תמיכה רב-שפתית

## 📄 רישיון

פרויקט זה נבנה למטרות הדגמה וניתן להשתמש בו בחופשיות.

## 💡 תמיכה

לשאלות או בעיות, ניתן לפנות דרך:
- בדיקת הלוגים: `pm2 logs webapp --nostream`
- בדיקת סטטוס: `pm2 list`
- אתחול מחדש: `pm2 restart webapp`

---

**נבנה עם ❤️ באמצעות Hono, Cloudflare Workers ו-Tailwind CSS**
